<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Welcome to Our Algae Pond</title>

<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>

<style>
html, body {
  margin:0;
  padding:0;
  height:100%;
  font-family: 'Montserrat', sans-serif;
  overflow-x:hidden;
}

/* 3 Layer Background */
body {
  background: linear-gradient(
    to bottom,
    #4CAF50 0%,
    #4CAF50 33%,
    #f5deb3 33%,
    #f5deb3 66%,
    #0f3057 66%,
    #0f3057 100%
  );
  position:relative;
}

/* Heading */
h1{
  text-align:center;
  padding:30px 10px;
  font-family:'Fredoka One', cursive;
  color:white;
  font-size:42px;
}

/* Layout */
.container{
  display:flex;
  justify-content:center;
  gap:40px;
  padding:20px;
  flex-wrap:wrap;
}

.card{
  background:white;
  padding:25px;
  border-radius:15px;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
  z-index:3;
  position:relative;
}

.upload-box{
  background:#f1f1f1;
  padding:25px;
  border-radius:12px;
  text-align:center;
  cursor:pointer;
  transition:0.3s;
}
.upload-box:hover{
  background:#d4f8d4;
  transform:scale(1.03);
}

/* Carousel */
.carousel{
  margin-top:15px;
  position:relative;
  width:100%;
  max-width:200px;
}
.carousel img{
  width:100%;
  border-radius:10px;
  display:none;
}
.carousel img.active{display:block;}
.carousel button{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:rgba(0,0,0,0.3);
  border:none;
  color:white;
  font-size:18px;
  padding:5px 8px;
  cursor:pointer;
  border-radius:5px;
}
.prev{left:5px;}
.next{right:5px;}

.description{
  margin-top:15px;
  font-size:14px;
}

/* Stars */
.stars span{
  font-size:30px;
  cursor:pointer;
  color:gray;
  display:inline-block;
}
.stars span.filled{
  color:gold;
  animation:bounce 0.4s ease;
}
@keyframes bounce{
  0%{transform:scale(1);}
  50%{transform:scale(1.4);}
  100%{transform:scale(1);}
}

/* Buttons */
button{
  padding:10px 15px;
  margin:8px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.contribute{background:#27ae60;color:white;}
.explore{background:#2980b9;color:white;}

.thank-message{
  margin-top:10px;
  min-height:24px;
}

/* Bubbles */
.bubble{
  position:fixed;
  bottom:-50px;
  border-radius:50%;
  pointer-events:auto;
  z-index:2;
  animation:rise linear infinite;
  cursor:pointer;
}
@keyframes rise{
  0%{transform:translateY(0);opacity:0.6;}
  100%{transform:translateY(-110vh);opacity:0;}
}
@keyframes pop{
  0%{transform:scale(1);opacity:1;}
  60%{transform:scale(1.4);opacity:0.6;}
  100%{transform:scale(0);opacity:0;}
}

/* Bottom Message */
.bottom-text{
  position:fixed;
  bottom:10px;
  width:100%;
  text-align:center;
  font-size:14px;
  color:white;
  opacity:0.85;
  pointer-events:none;
}
</style>
</head>

<body>

<h1>Welcome to Our Algae Pond</h1>

<div class="container">

<div class="card">
  <div class="upload-box" onclick="document.getElementById('imageUpload').click()">
    Select your algae photo to start
  </div>
  <input type="file" id="imageUpload" accept="image/*" style="display:none;">
  <h3 id="prediction"></h3>
  <div id="carousel" class="carousel"></div>
  <div id="description" class="description"></div>
</div>

<div class="card" style="text-align:center;">
  <div class="stars" id="stars"></div>
  <div class="thank-message" id="thankMessage"></div>
  <button class="contribute">Contribute</button>
  <button class="explore">Explore</button>
</div>

</div>

<div class="bottom-text">
Yes, the bubbles are playable. Tap to pop. Hold to drag.
</div>

<script>

/* ---------- STAR SYSTEM ---------- */
const starsContainer=document.getElementById("stars");
const thankMessage=document.getElementById("thankMessage");
let rating=0;

function renderStars(){
starsContainer.innerHTML="";
for(let i=1;i<=5;i++){
let s=document.createElement("span");
s.innerHTML=i<=rating?"★":"☆";
if(i<=rating)s.classList.add("filled");
s.onclick=()=>{rating=i;renderStars();
const msg=["We'll improve.","Thank you.","Nice.","Awesome.","You love our pond."];
thankMessage.innerText=msg[i-1];
};
starsContainer.appendChild(s);
}
}
renderStars();

/* ---------- BUBBLES ---------- */

const bubbleColors=[
"rgba(255,255,255,0.8)",
"rgba(173,216,230,0.8)",
"rgba(144,238,144,0.8)"
];

function createSingleBubble(){
const b=document.createElement("div");
b.className="bubble";

const size=15+Math.random()*15;
b.style.width=size+"px";
b.style.height=size+"px";
b.style.left=Math.random()*window.innerWidth+"px";
b.style.background=bubbleColors[Math.floor(Math.random()*bubbleColors.length)];
b.style.boxShadow="0 0 12px "+b.style.background;
b.style.animationDuration=(6+Math.random()*6)+"s";

let holdTimer,isDragging=false,offsetX=0,offsetY=0;

function startHold(e){
holdTimer=setTimeout(()=>{
isDragging=true;
b.style.animation="none";
const rect=b.getBoundingClientRect();
const x=e.touches?e.touches[0].clientX:e.clientX;
const y=e.touches?e.touches[0].clientY:e.clientY;
offsetX=x-rect.left;
offsetY=y-rect.top;
},200);
}

function moveDrag(e){
if(!isDragging)return;
const x=e.touches?e.touches[0].clientX:e.clientX;
const y=e.touches?e.touches[0].clientY:e.clientY;
b.style.left=x-offsetX+"px";
b.style.top=y-offsetY+"px";
}

function endAction(){
clearTimeout(holdTimer);
if(isDragging){
isDragging=false;
b.style.animation="";
}else{
popBubble(b);
}
}

b.addEventListener("mousedown",startHold);
b.addEventListener("touchstart",startHold);
document.addEventListener("mousemove",moveDrag);
document.addEventListener("touchmove",moveDrag);
document.addEventListener("mouseup",endAction);
document.addEventListener("touchend",endAction);

document.body.appendChild(b);
}

function popBubble(b){
b.style.animation="pop 0.4s forwards";
setTimeout(()=>{b.remove();createSingleBubble();},400);
}

/* Calm number of bubbles */
for(let i=0;i<30;i++){
createSingleBubble();
}

</script>

</body>
</html>
